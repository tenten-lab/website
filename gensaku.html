<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>åŸå…¸ç´¹ä»‹</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* ========= å…¨é«”èƒŒæ™¯ ========= */
    body {
      margin: 0;
      font-family: "Noto Serif JP", serif;
      min-height: 100vh;
      background: url('éƒ½å¸‚ä¼èª¬å·¡ã‚Š.png') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #3a1b0b;
    }

    /* æ‰‹æ©Ÿå¯ä»¥æ›æˆæ‰‹æ©Ÿç‰ˆèƒŒæ™¯ */
    @media (max-width: 768px) {
      body {
        background-image: url('éƒ½å¸‚ä¼èª¬å·¡ã‚Š_sp.png');
        background-position: center top;
      }
    }

    /* ========= é é¢ä¸Šæ–¹æ¨™é¡Œ ========= */
    .top-header {
      margin-top: 20px;
      text-align: center;
      padding: 10px 18px;
      background: radial-gradient(circle at 50% 0,
                  rgba(255,255,255,0.35),
                  rgba(0,0,0,0.85) 70%);
      border-radius: 999px;
      border: 1px solid rgba(255,190,190,0.8);
      box-shadow: 0 0 18px rgba(0,0,0,0.7);
      color: #ffecec;
    }

    .top-header h1 {
      margin: 0;
      font-size: 26px;
      letter-spacing: 0.2em;
    }

    .top-header .sub {
      font-size: 13px;
      margin-top: 3px;
      opacity: 0.9;
      letter-spacing: 0.15em;
    }

    @media (max-width: 768px) {
      .top-header {
        margin-top: 16px;
        padding: 8px 14px;
      }
      .top-header h1 {
        font-size: 20px;
      }
      .top-header .sub {
        font-size: 11px;
      }
    }

    /* ========= åœ°å€æ¨™ç±¤ ========= */
    .tabs {
      margin-top: 18px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .tabs button {
      border-radius: 8px 8px 0 0;
      border: 1px solid #b08a5b;
      background: #f7e3c4;
      padding: 6px 14px;
      font-size: 14px;
      cursor: pointer;
      color: #5b3518;
      box-shadow: 0 -1px 0 #fdf5e8 inset;
      transition: background 0.2s, transform 0.15s;
    }

    .tabs button.active {
      background: #f2d3a0;
      transform: translateY(-2px);
      box-shadow:
        0 -1px 0 #fff inset,
        0 2px 6px rgba(0,0,0,0.45);
      font-weight: bold;
    }

    .tabs button:hover {
      background: #fbe1b6;
    }

    @media (max-width: 768px) {
      .tabs button {
        font-size: 13px;
        padding: 6px 10px;
      }
    }

    /* ========= æ›¸æœ¬å®¹å™¨ ========= */
    .book-wrapper {
      margin-top: 10px;
      padding: 18px 10px 30px;
      max-width: 1100px;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
    }

    /* å·¦å³ç®­é ­ */
    .nav-arrow {
      border: none;
      background: rgba(0,0,0,0.55);
      color: #ffecec;
      width: 40px;
      height: 60px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 22px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.8);
      transition: transform 0.15s, background 0.15s;
    }

    .nav-arrow:hover {
      background: rgba(0,0,0,0.8);
      transform: translateY(-2px);
    }

    .nav-arrow:disabled {
      opacity: 0.35;
      cursor: default;
      transform: none;
    }

    @media (max-width: 768px) {
      .book-wrapper {
        padding: 12px;
      }
      .nav-arrow {
        width: 34px;
        height: 46px;
        font-size: 18px;
      }
    }

    /* ========= æ›¸æœ¬æœ¬é«” ========= */
    .book {
      margin: 0 14px;
      background: radial-gradient(circle at 50% 0,
                  rgba(255,255,255,0.35),
                  rgba(50,25,5,0.95) 65%);
      padding: 18px;
      border-radius: 18px;
      border: 1px solid rgba(255,220,200,0.8);
      box-shadow:
        0 14px 30px rgba(0,0,0,0.9),
        0 0 18px rgba(0,0,0,0.7);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      perspective: 2000px; /* 3D æ•ˆæœ */
      box-sizing: border-box;
    }

    @media (max-width: 768px) {
      .book {
        grid-template-columns: 1fr;
        max-width: 700px;
      }
    }

    /* ========= æ¯ä¸€é  ========= */
    .page {
      background: #fdf6e6;
      border-radius: 10px;
      box-shadow:
        0 0 0 1px rgba(200,170,120,0.7) inset,
        0 6px 20px rgba(0,0,0,0.35);
      padding: 14px 16px;
      box-sizing: border-box;
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
      transition: transform 0.6s ease, box-shadow 0.6s ease;
    }

    .page-inner {
      position: relative;
      z-index: 2;
    }

    /* å·¦é  / å³é ç¿»å‹•çš„æ”¯é» */
    .page.left {
      transform-origin: right center;
    }
    .page.right {
      transform-origin: left center;
    }

    /* ç¿»é å‹•ç•«ï¼šå¾€å‰ï¼ˆå³é ç¿»éå»ï¼‰ */
    .page.right.flip-forward {
      transform: rotateY(-180deg);
      box-shadow:
        -10px 0 30px rgba(0,0,0,0.7);
    }

    /* ç¿»é å‹•ç•«ï¼šå¾€å›ï¼ˆå·¦é ç¿»å›ä¾†ï¼‰ */
    .page.left.flip-back {
      transform: rotateY(180deg);
      box-shadow:
        10px 0 30px rgba(0,0,0,0.7);
    }

    /* æ‰‹æ©Ÿç‰ˆåªé¡¯ç¤ºå·¦é ï¼ˆå–®é æ¨¡å¼ï¼‰ */
    @media (max-width: 768px) {
      .page.right {
        display: none;
      }
    }

    /* ========= é å…§å¸ƒå±€ ========= */
    .page-header {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 8px;
    }

    .page-img {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      object-fit: cover;
      box-shadow: 0 3px 10px rgba(0,0,0,0.4);
      flex-shrink: 0;
    }

    .page-title {
      font-size: 15px;
      font-weight: 900;
      color: #5b3518;
    }

    .page-region {
      font-size: 12px;
      color: #9b6b33;
      margin-top: 2px;
    }

    .page-body {
      margin-top: 6px;
      font-size: 14px;
      line-height: 1.6;
      color: #3f260f;
    }

    .page-body .jp {
      margin-bottom: 6px;
      white-space: pre-line;
    }

    .page-body .zh {
      font-size: 13px;
      color: #7b5030;
      white-space: pre-line;
    }

    /* æ—¥æ–‡ï¼‹ä¸­æ–‡æ¨™ç±¤ */
    .lang-label {
      font-size: 11px;
      color: #b37a3a;
      margin-bottom: 2px;
      letter-spacing: 0.09em;
    }

    /* ========= é ç¢¼ / ç‹€æ…‹åˆ— ========= */
    .status-bar {
      margin-top: 10px;
      margin-bottom: 14px;
      text-align: center;
      font-size: 13px;
      color: #fbe9d6;
      text-shadow: 0 1px 3px rgba(0,0,0,0.8);
    }

    /* å³ä¸‹è§’å›é¦–é  */
    .home-fab {
      position: fixed;
      right: 18px;
      bottom: 18px;
      background: #ffb5b5;
      color: #600030;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 26px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.85);
      text-decoration: none;
      z-index: 30;
    }

    .home-fab:hover {
      background: #ff9797;
    }

    @media (max-width: 768px) {
      .home-fab {
        width: 48px;
        height: 48px;
        font-size: 22px;
        right: 12px;
        bottom: 12px;
      }
    }
  </style>
</head>
<body>

  <!-- é é¢æ¨™é¡Œï¼šåŸå…¸ç´¹ä»‹ï¼ˆåŸå…¸è§£èªªï¼‰ -->
  <div class="top-header">
    <h1>åŸå…¸ç´¹ä»‹</h1>
    <div class="sub">ï¼ˆåŸå…¸è§£èªªï¼‰</div>
  </div>

  <!-- åœ°å€æ¨™ç±¤ -->
  <div class="tabs">
    <button class="tab-btn active" data-region="hokkaido" onclick="selectRegion('hokkaido')">åŒ—æµ·é“åœ°æ–¹</button>
    <button class="tab-btn" data-region="tohoku" onclick="selectRegion('tohoku')">æ±åŒ—åœ°æ–¹</button>
    <button class="tab-btn active" data-region="kanto" onclick="selectRegion('kanto')">é–¢æ±åœ°æ–¹</button>
    <button class="tab-btn" data-region="chubu" onclick="selectRegion('chubu')">ä¸­éƒ¨åœ°æ–¹</button>
    <button class="tab-btn active" data-region="kinki" onclick="selectRegion('kinki')">è¿‘ç•¿åœ°æ–¹</button>
    <button class="tab-btn" data-region="chugoku" onclick="selectRegion('chugoku')">ä¸­å›½åœ°æ–¹</button>
     <button class="tab-btn active" data-region="shikoku" onclick="selectRegion('shikoku')">å››å›½åœ°æ–¹</button>
    <button class="tab-btn" data-region="kyushu" onclick="selectRegion('kyushu')">ä¹å·åœ°æ–¹</button>
     <button class="tab-btn active" data-region="okinawa" onclick="selectRegion('okinawa')">æ²–ç¸„åœ°æ–¹</button>
    <!-- ä¹‹å¾Œå¯ä»¥å†åŠ ï¼šæ±åŒ— / ä¸­éƒ¨ / é–¢è¥¿ / ä¸­å›½ / å››å›½ / ä¹å·ãƒ»æ²–ç¸„ -->
  </div>

  <!-- é ç¢¼é¡¯ç¤º -->
  <div class="status-bar" id="statusBar">
    åŒ—æµ·é“ï¼š1â€“2ãƒšãƒ¼ã‚¸
  </div>

  <!-- æ›¸æœ¬ + ç®­é ­ -->
  <div class="book-wrapper">
    <button class="nav-arrow" id="prevBtn" onclick="prevPage()">â—€</button>

    <div class="book">
      <!-- å·¦é  -->
      <div class="page left">
        <div class="page-inner">
          <div class="page-header">
            <img class="page-img" id="leftImg" src="" alt="">
            <div>
              <div class="page-title" id="leftTitle"></div>
              <div class="page-region" id="leftRegion"></div>
            </div>
          </div>
          <div class="page-body">
            <div class="lang-label">æ—¥æœ¬èª</div>
            <div class="jp" id="leftJp"></div>
            <div class="lang-label">ï¼ˆä¸­æ–‡ï¼‰</div>
            <div class="zh" id="leftZh"></div>
          </div>
        </div>
      </div>

      <!-- å³é  -->
      <div class="page right">
        <div class="page-inner">
          <div class="page-header">
            <img class="page-img" id="rightImg" src="" alt="">
            <div>
              <div class="page-title" id="rightTitle"></div>
              <div class="page-region" id="rightRegion"></div>
            </div>
          </div>
          <div class="page-body">
            <div class="lang-label">æ—¥æœ¬èª</div>
            <div class="jp" id="rightJp"></div>
            <div class="lang-label">ï¼ˆä¸­æ–‡ï¼‰</div>
            <div class="zh" id="rightZh"></div>
          </div>
        </div>
      </div>
    </div>

    <button class="nav-arrow" id="nextBtn" onclick="nextPage()">â–¶</button>
  </div>

  <!-- å›é¦–é  -->
  <a href="index2.html" class="home-fab">ğŸ </a>

<script>
  /* ========= æ•…äº‹è³‡æ–™ï¼ˆç¤ºç¯„ï¼‰ =========
     ä¹‹å¾Œä½ åªè¦åœ¨é€™è£¡å¢åŠ æ¯ä¸€é çš„å…§å®¹å°±å¥½
     ä¸€å€‹ç‰©ä»¶ = æ›¸çš„ä¸€é 
  */
  const storyData = {
    hokkaido: [
      {
        title: "åŒ—æµ·é“ âˆ’ ç¶²èµ°ç›£ç„",
        regionLabel: "åŒ—æµ·é“åœ°æ–¹ãƒ»ç¶²èµ°å¸‚",
        img: "hokaido.png",
        jp: "ä¿®å­¦æ—…è¡Œã§è¨ªã‚ŒãŸé›ªã®ç¶²èµ°ç›£ç„ã€‚\nå‡ãˆã‚‹ã‚ˆã†ãªå¯’ã•ã®ä¸­ã€å±•ç¤ºå®¤ã«å…¥ã‚‹ã¨ã€\nä¸€ä½“ã®å›šäººäººå½¢ã®çœ¼å·®ã—ã«å¿ƒã‚’æ´ã¾ã‚Œã‚‹ã€‚\næ¬¡ã®ç¬é–“ã€è€³å…ƒã«æ€’å·æ··ã˜ã‚Šã®æ©Ÿæ¢°éŸ³ãŒéŸ¿ã„ãŸã€‚\nã€Œæ—©ãä½œæ¥­ã‚’ç¶šã‘ã‚ï¼ã€€ä¼‘ã‚€ãªï¼ã€€ãŠå‰ã¯å›šäººã ã‚ã†ãŒï¼ã€\n\né ­ç—›ã¨ã¨ã‚‚ã«è¦–ç•ŒãŒæºã‚Œã€äººå½¢ãŒã‚†ã£ãã‚Šã¨æ‰‹ã‚’ä¼¸ã°ã—ã¦ãã‚‹â€”â€”ã€‚",
        zh: "åœ¨é›ªåœ°ä¸­çš„ç¶²èµ°ç›£ç„ä¿®å­¸æ—…è¡Œã€‚\nä½ è¸é€²åˆºéª¨å¯’æ„è£¡çš„å±•ç¤ºå®¤æ™‚ï¼Œçªç„¶è¢«ä¸€å°Šå›šçŠ¯äººå½¢çš„çœ¼ç¥ç‰¢ç‰¢å¸ä½ã€‚\nä¸‹ä¸€ç§’ï¼Œè€³é‚Šå‚³ä¾†å¼å«èˆ‡æ©Ÿæ¢°è²æ··é›œçš„å’†å“®ï¼šã€Œå¿«çµ¦æˆ‘ç¹¼çºŒä½œæ¥­ï¼ä¸å‡†ä¼‘æ¯ï¼ä½ å¯æ˜¯å›šçŠ¯å•Šï¼ã€\n\né ­ä¸€é™£æŠ½ç—›ï¼Œè¦–é‡é–‹å§‹æ™ƒå‹•ï¼Œé‚£å°Šäººå½¢ç«Ÿåƒæ´»äº†ä¸€æ¨£ï¼Œæ…¢æ…¢æœä½ ä¼¸å‡ºæ‰‹â€”â€”ã€‚"
      },
      {
        title: "åŒ—æµ·é“ âˆ’ ãƒˆãƒ³ãƒãƒ«ã«æ®‹ã‚‹å£°",
        regionLabel: "åŒ—æµ·é“æŸæ‰€",
        img: "hokaido.png",
        jp: "ç¶²èµ°ã‹ã‚‰ã®å¸°ã‚Šé“ã€ãƒã‚¹ã¯å¤ã„ãƒˆãƒ³ãƒãƒ«ã‚’é€šã‚ŠæŠœã‘ã‚ˆã†ã¨ã—ã¦ã„ãŸã€‚\néœ§ã®ã‚ˆã†ãªé›ªãŒãƒ•ãƒ­ãƒ³ãƒˆã‚¬ãƒ©ã‚¹ã‚’å©ãã€è»Šå†…ã¯é™ã¾ã‚Šè¿”ã£ã¦ã„ã‚‹ã€‚\nãµã¨ã€åŠ©æ‰‹å¸­ã®ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã‹ã‚‰å°ã•ãªå›ãå£°ãŒèã“ãˆãŸã€‚\nã€Œâ€¦â€¦ã¾ã ã€å‡ºã‚‰ã‚Œãªã„ã‚“ã ã€\n\næŒ¯ã‚Šå‘ã„ã¦ã‚‚ã€ãã“ã«ã¯èª°ã‚‚ã„ãªã„ã€‚\nãŸã ã€ã•ã£ãè¦‹ãŸå›šäººäººå½¢ã®é¡”ã ã‘ãŒé ­ã‹ã‚‰é›¢ã‚Œãªã‹ã£ãŸã€‚",
        zh: "å¾ç¶²èµ°è¿”å›çš„è·¯ä¸Šï¼Œå·´å£«æ­£è¦é§›å…¥ä¸€æ¢è€èˆŠéš§é“ã€‚\néœ§ä¸€èˆ¬çš„é›ªèŠ±æ‰“åœ¨æ“‹é¢¨ç»ç’ƒä¸Šï¼Œè»Šå…§å®‰éœå¾—åªå‰©æš–æ°£è²ã€‚\né€™æ™‚ï¼Œå‰¯é§•åº§æ—çš„å–‡å­è£¡å‚³ä¾†ç´°å¾®çš„ä½èªï¼š\nã€Œâ€¦â€¦æˆ‘é‚„ã€å‡ºä¸å»å•Šã€‚ã€\n\nä½ çŒ›ç„¶å›é ­ï¼Œèº«å¾Œç©ºç„¡ä¸€äººã€‚\nè…¦æµ·ä¸­å»å†æ¬¡æµ®ç¾ï¼Œé‚£å°Šå›šçŠ¯äººå½¢æ‰­æ›²çš„è‡‰ã€‚"
      }
    ],

    kanto: [
      {
        title: "æ±äº¬éƒ½ âˆ’ åƒé§„ãƒ¶è°·ãƒˆãƒ³ãƒãƒ«ã®å½±",
        regionLabel: "é–¢æ±åœ°æ–¹ãƒ»æ±äº¬éƒ½",
        img: "tokyo.png",
        jp: "æ·±å¤œã€ã‚¿ã‚¯ã‚·ãƒ¼ã®å¾Œéƒ¨åº§å¸­ã§ä»•äº‹ã®é›»è©±ã‚’ã—ã¦ã„ãŸã€‚\nã€Œã¯ã„ã€ã§ã¯ãã®å†…å®¹ã§ç¢ºå®šã„ãŸã—ã¾ã™ã€‚â€¦â€¦ã‚‚ã—ã‚‚ã—ï¼Ÿã€\nçªç„¶ã€å›ç·šãŒé€”åˆ‡ã‚Œã€è»Šå†…ã®ç©ºæ°—ãŒé‡ããªã‚‹ã€‚\n\né‹è»¢æ‰‹ãŒçŸ­ãæ‚²é³´ã‚’ã‚ã’ãŸã€‚\nå‰æ–¹ã‚’è¦‹ã‚‹ã¨ã€ãƒˆãƒ³ãƒãƒ«ã®å¤©äº•ã‹ã‚‰é€†ã•ã«ã¶ã‚‰ä¸‹ãŒã‚‹ç”·ã®å§¿â€•â€•\nè¡€ã¾ã¿ã‚Œã®é¡”ãŒã€ã¡ã‚‡ã†ã©ã‚ãªãŸã®ç›®ç·šã®é«˜ã•ã«ã‚ã£ãŸã€‚",
        zh: "æ·±å¤œï¼Œä½ ååœ¨è¨ˆç¨‹è»Šå¾Œåº§è¬›è‘—å·¥ä½œé›»è©±ã€‚\nã€Œå¥½çš„ï¼Œé‚£å°±ç…§é€™å€‹å…§å®¹ç¢ºèªâ€¦â€¦å–‚ï¼Ÿå–‚ï¼Ÿã€\né€šè©±çªç„¶ä¸­æ–·ï¼Œè»Šå…§çš„ç©ºæ°£åƒè¢«å£“ä½äº†å¹¾åº¦ã€‚\n\nå¸æ©ŸçŸ­ä¿ƒåœ°å°–å«å‡ºè²ã€‚\nä½ æŠ¬é ­æœ›å»ï¼Œåªè¦‹éš§é“å¤©èŠ±æ¿ä¸Šï¼Œæœ‰å€‹ç”·äººå€’åŠè‘—èº«é«”ï¼Œ\næ»¿è‡‰æ˜¯è¡€ï¼Œè¦–ç·šå‰›å¥½èˆ‡ä½ å¹³è¡Œå°ä¸Šã€‚"
      },
      {
        title: "æ±äº¬éƒ½ âˆ’ é›»è©±ã®å‘ã“ã†å´",
        regionLabel: "é–¢æ±åœ°æ–¹ãƒ»æ±äº¬éƒ½",
        img: "tokyo.png",
        jp: "ãã®ç¬é–“ã€ã‚ãªãŸã®ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ãŒé³´ã‚‹ã€‚\nç”»é¢ã«ã¯è¦‹è¦šãˆã®ãªã„ç•ªå·ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãŸã€‚\n\næã‚‹æã‚‹å‡ºã‚‹ã¨ã€èã“ãˆã¦ããŸã®ã¯ãƒ‹ãƒ¥ãƒ¼ã‚¹ç•ªçµ„ã®éŸ³å£°ã ã£ãŸã€‚\nã€æœ¬æ—¥æ·±å¤œã€åƒé§„ãƒ¶è°·ãƒˆãƒ³ãƒãƒ«ã«ã¦è‡ªæäº‹æ•…ãŒç™ºç”Ÿã—ã€\nã€€ã‚¿ã‚¯ã‚·ãƒ¼ã®ä¹—å®¢ã¨é‹è»¢æ‰‹ãŒæ­»äº¡ã—ã¾ã—ãŸâ€•â€•ã€\n\né€šè©±ã¯ã€ãã“ã§ã·ã¤ã‚Šã¨é€”åˆ‡ã‚ŒãŸã€‚",
        zh: "å°±åœ¨é‚£ä¸€åˆ»ï¼Œä½ çš„æ‰‹æ©Ÿå¿½ç„¶éœ‡å‹•éŸ¿èµ·ã€‚\nè¢å¹•ä¸Šé¡¯ç¤ºè‘—ä¸€ä¸²å®Œå…¨æ²’çœ‹éçš„è™Ÿç¢¼ã€‚\n\nä½ é¼“èµ·å‹‡æ°£æ¥èµ·é›»è©±ï¼Œè€³é‚Šå»å‚³ä¾†æ–°èæ’­å ±çš„è²éŸ³ï¼š\nã€Œä»Šæ—¥æ·±å¤œï¼Œåƒé§„è°·éš§é“ç™¼ç”Ÿä¸€èµ·è‡ªæ’äº‹æ•…ï¼Œ\nã€€è¨ˆç¨‹è»Šå…§çš„ä¹˜å®¢èˆ‡å¸æ©Ÿçš†ç•¶å ´èº«äº¡â€”â€”ã€\n\nè©±éŸ³è½ä¸‹ï¼Œé€šè©±ä¹Ÿéš¨å³ä¸­æ–·ã€‚"
      }
    ]
  };

  let currentRegion = "hokkaido";
  let currentIndex = 0; // æŒ‡å‘ã€Œå·¦é ã€çš„é ç¢¼ï¼ˆé™£åˆ— indexï¼‰

  const leftPageEl   = document.querySelector(".page.left");
  const rightPageEl  = document.querySelector(".page.right");

  const leftImg   = document.getElementById("leftImg");
  const leftTitle = document.getElementById("leftTitle");
  const leftRegion= document.getElementById("leftRegion");
  const leftJp    = document.getElementById("leftJp");
  const leftZh    = document.getElementById("leftZh");

  const rightImg   = document.getElementById("rightImg");
  const rightTitle = document.getElementById("rightTitle");
  const rightRegion= document.getElementById("rightRegion");
  const rightJp    = document.getElementById("rightJp");
  const rightZh    = document.getElementById("rightZh");

  const statusBar = document.getElementById("statusBar");
  const prevBtn   = document.getElementById("prevBtn");
  const nextBtn   = document.getElementById("nextBtn");

  function isMobile() {
    return window.innerWidth <= 768;
  }

  function updateStatusBar() {
    const pages = storyData[currentRegion] || [];
    const total = pages.length;
    let leftNo  = currentIndex + 1;
    let rightNo = isMobile() ? null : (currentIndex + 2 <= total ? currentIndex + 2 : null);
    let text = currentRegionLabel(currentRegion) + "ï¼š";

    if (isMobile()) {
      text += leftNo + " / " + total + "ãƒšãƒ¼ã‚¸";
    } else {
      if (rightNo) {
        text += leftNo + "â€“" + rightNo + "ãƒšãƒ¼ã‚¸ï¼ˆå…¨" + total + "ãƒšãƒ¼ã‚¸ï¼‰";
      } else {
        text += leftNo + "ãƒšãƒ¼ã‚¸ï¼ˆå…¨" + total + "ãƒšãƒ¼ã‚¸ï¼‰";
      }
    }
    statusBar.textContent = text;
  }

  function currentRegionLabel(region) {
    switch (region) {
      case "hokkaido": return "åŒ—æµ·é“";
      case "kanto":    return "é–¢æ±";
      default:         return region;
    }
  }

  function renderPages() {
    const pages = storyData[currentRegion] || [];

    // å·¦é è³‡æ–™
    const leftData = pages[currentIndex];
    if (leftData) {
      leftImg.src = leftData.img || "";
      leftImg.alt = leftData.title || "";
      leftTitle.textContent  = leftData.title || "";
      leftRegion.textContent = leftData.regionLabel || "";
      leftJp.textContent     = leftData.jp || "";
      leftZh.textContent     = leftData.zh || "";
    } else {
      leftImg.src = "";
      leftTitle.textContent  = "";
      leftRegion.textContent = "";
      leftJp.textContent     = "";
      leftZh.textContent     = "";
    }

    // å³é è³‡æ–™ï¼ˆæ¡Œæ©Ÿç‰ˆç”¨ï¼‰
    const rightData = pages[currentIndex + 1];
    if (rightData) {
      rightImg.src = rightData.img || "";
      rightImg.alt = rightData.title || "";
      rightTitle.textContent  = rightData.title || "";
      rightRegion.textContent = rightData.regionLabel || "";
      rightJp.textContent     = rightData.jp || "";
      rightZh.textContent     = rightData.zh || "";
    } else {
      rightImg.src = "";
      rightTitle.textContent  = "";
      rightRegion.textContent = "";
      rightJp.textContent     = "";
      rightZh.textContent     = "";
    }

    updateStatusBar();
    updateButtons();
  }

  function updateButtons() {
    const pages = storyData[currentRegion] || [];
    const total = pages.length;
    // æ¡Œæ©Ÿä¸€æ¬¡çœ‹å…©é ï¼›æ‰‹æ©Ÿä¸€æ¬¡çœ‹ä¸€é 
    const step = isMobile() ? 1 : 2;

    prevBtn.disabled = currentIndex <= 0;
    // æ˜¯å¦é‚„æœ‰ä¸‹ä¸€é ï¼Ÿ
    nextBtn.disabled = currentIndex + step >= total;
  }

  function selectRegion(region) {
    currentRegion = region;
    currentIndex  = 0;
    // tab æ¨£å¼
    document.querySelectorAll(".tab-btn").forEach(btn => {
      btn.classList.toggle("active", btn.dataset.region === region);
    });
    renderPages();
  }

  function nextPage() {
    const pages = storyData[currentRegion] || [];
    const total = pages.length;
    const step = isMobile() ? 1 : 2;

    if (currentIndex + step >= total) return;

    // å‹•ç•«ï¼šå³é å¾€å‰ç¿»
    if (!isMobile()) {
      rightPageEl.classList.add("flip-forward");
      setTimeout(() => {
        rightPageEl.classList.remove("flip-forward");
        currentIndex += step;
        renderPages();
      }, 600);
    } else {
      // æ‰‹æ©Ÿåªç”¨æ·¡æ·¡ç¿»å‹•æ„Ÿï¼šå³é å‹•ç•«çœ‹ä¸åˆ°ï¼Œå°±è®“å·¦é ç¨å¾®ç¿»ä¸€ä¸‹ä¹Ÿå¯ä»¥
      rightPageEl.classList.add("flip-forward");
      setTimeout(() => {
        rightPageEl.classList.remove("flip-forward");
        currentIndex += step;
        renderPages();
      }, 600);
    }
  }

  function prevPage() {
    if (currentIndex <= 0) return;
    const step = isMobile() ? 1 : 2;

    // å‹•ç•«ï¼šå·¦é å¾€å›ç¿»
    leftPageEl.classList.add("flip-back");
    setTimeout(() => {
      leftPageEl.classList.remove("flip-back");
      currentIndex = Math.max(0, currentIndex - step);
      renderPages();
    }, 600);
  }

  // è¢å¹•å°ºå¯¸è®ŠåŒ–æ™‚ï¼Œæ›´æ–°æŒ‰éˆ•ç‹€æ…‹
  window.addEventListener("resize", () => {
    updateStatusBar();
    updateButtons();
  });

  // åˆå§‹è¼‰å…¥
  renderPages();
</script>
</body>
</html>
