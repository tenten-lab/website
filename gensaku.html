<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>åŸå…¸ç´¹ä»‹</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    /* ===== å…¨åŸŸå­—å‹ & èƒŒæ™¯ ===== */
    body {
      margin: 0;
      font-family: "Noto Serif JP", "Yu Mincho", "Hiragino Mincho ProN", serif;
      min-height: 100vh;
      background: url('éƒ½å¸‚ä¼èª¬å·¡ã‚Š.png') no-repeat center center fixed; /* PC ç‰ˆèƒŒæ™¯ */
      background-size: cover;
      color: #fdf5f5;
      position: relative;
    }

    /* æš—éœ§ */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 50% 0,
                  rgba(0,0,0,0.75),
                  rgba(0,0,0,0.95));
      z-index: -1;
    }

    /* å¹³æ¿èƒŒæ™¯ */
    @media (min-width: 769px) and (max-width: 1024px) {
      body {
        background-image: url('éƒ½å¸‚ä¼èª¬å·¡ã‚Š.png'); /* ä½ å¯ä»¥æ›æˆè‡ªå·±çš„æª”å */
        background-position: center top;
        background-attachment: scroll;
      }
    }

    /* æ‰‹æ©ŸèƒŒæ™¯ */
    @media (max-width: 768px) {
      body {
        background-image: url('éƒ½å¸‚ä¼èª¬å·¡ã‚Š-æ‰‹æ©Ÿç‰ˆ.png');
        background-position: center top;
        background-attachment: scroll;
      }
    }

    /* ===== é ‚éƒ¨æ¨™é¡Œå€ ===== */
    header {
      position: fixed;
      top: 0;
      width: 100%;
      display: flex;
      justify-content: center;
      padding: 16px 10px 10px;
      z-index: 20;
      pointer-events: none;
    }

    .title-wrap {
      pointer-events: auto;
      background: radial-gradient(circle at 50% 0,
                  rgba(255,0,60,0.2),
                  rgba(0,0,0,0.92) 60%,
                  rgba(0,0,0,0.98) 100%);
      padding: 10px 48px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,120,150,0.8);
      box-shadow:
        0 0 24px rgba(255,0,0,0.8),
        0 0 55px rgba(0,0,0,0.98);
      text-align: center;
      min-width: 280px;
    }

    .title-main {
      margin: 0;
      font-size: 26px;
      letter-spacing: .2em;
      color: #fff5f8;
      text-shadow:
        0 0 8px rgba(255,100,120,0.9),
        0 0 18px rgba(0,0,0,1);
    }

    .title-sub-ja {
      display: block;
      margin-top: 4px;
      font-size: 14px;
      color: #ffd6de;
      letter-spacing: .18em;
    }

    .title-sub-zh {
      display: block;
      margin-top: 2px;
      font-size: 12px;
      color: #ffbfcf;
      opacity: 0.9;
      letter-spacing: .08em;
    }

    @media (max-width: 768px) {
      .title-wrap {
        padding: 8px 18px 10px;
        border-radius: 16px;
        max-width: 92%;
      }
      .title-main {
        font-size: 20px;
        letter-spacing: .16em;
      }
      .title-sub-ja {
        font-size: 12px;
      }
      .title-sub-zh {
        font-size: 11px;
      }
    }

    /* ===== ä¸»æ¡†ï¼šæœå°‹ + å…§å®¹ ===== */
    .page-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 120px 16px 32px;
      box-sizing: border-box;
    }

    .panel {
      background: radial-gradient(circle at 0 0,
                rgba(255,255,255,0.12),
                rgba(10,0,20,0.92) 55%,
                rgba(0,0,0,0.98) 100%);
      border-radius: 18px;
      padding: 18px 18px 22px;
      box-shadow:
        0 10px 30px rgba(0,0,0,0.8),
        0 0 18px rgba(255,120,160,0.35);
      border: 1px solid rgba(255,160,190,0.7);
      backdrop-filter: blur(5px);
    }

    /* ===== æœå°‹ & ç¯©é¸åˆ— ===== */
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      margin-bottom: 12px;
    }

    .search-box {
      flex: 1 1 200px;
      position: relative;
    }

    .search-box input {
      width: 100%;
      padding: 8px 10px 8px 28px;
      border-radius: 999px;
      border: 1px solid rgba(255,200,210,0.8);
      font-size: 14px;
      background: rgba(20,0,20,0.85);
      color: #ffeef5;
      outline: none;
      box-shadow: 0 2px 8px rgba(0,0,0,0.7);
    }

    .search-box input::placeholder {
      color: #ffccd5;
      opacity: 0.7;
    }

    .search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 14px;
      opacity: 0.8;
    }

    .region-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: flex-end;
    }

    .region-btn {
      border: none;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      background: linear-gradient(90deg, #5f1830, #3a0d25);
      color: #ffe9f0;
      box-shadow: 0 2px 6px rgba(0,0,0,0.6);
      transition: 0.2s;
      white-space: nowrap;
    }

    .region-btn:hover {
      background: linear-gradient(90deg, #cc365f, #7a213a);
      transform: translateY(-1px);
    }

    .region-btn.active {
      background: linear-gradient(90deg, #ff6a8f, #e73563);
      color: #2b000c;
      font-weight: 700;
    }

    @media (max-width: 768px) {
      .controls {
        flex-direction: column;
        align-items: stretch;
      }
      .region-filters {
        justify-content: center;
      }
    }

    /* ===== çµ±è¨ˆåˆ— ===== */
    .stats {
      font-size: 12px;
      color: #ffdde8;
      margin-bottom: 8px;
      text-align: right;
      opacity: 0.9;
    }

    /* ===== å¡ç‰‡åˆ—è¡¨ ===== */
    .cards {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 14px;
      margin-top: 8px;
    }

    @media (max-width: 1024px) {
      .cards {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 640px) {
      .cards {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: radial-gradient(circle at 30% 0,
                 rgba(255,210,230,0.18),
                 rgba(20,0,25,0.96));
      border-radius: 14px;
      padding: 10px 10px 12px;
      display: flex;
      gap: 10px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.8);
      border: 1px solid rgba(255,160,190,0.8);
      transition: 0.22s;
      align-items: flex-start;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow:
        0 8px 20px rgba(0,0,0,0.95),
        0 0 16px rgba(255,150,190,0.6);
    }

    .card-thumb {
      width: 80px;
      height: 80px;
      border-radius: 10px;
      object-fit: cover;
      flex-shrink: 0;
      box-shadow: 0 3px 10px rgba(0,0,0,0.9);
      background: #000;
    }

    .card-body {
      flex: 1;
      min-width: 0;
    }

    .card-region {
      font-size: 11px;
      color: #ffb6c9;
      letter-spacing: .12em;
      margin-bottom: 2px;
    }

    .card-title {
      font-size: 14px;
      font-weight: 700;
      margin: 0 0 2px;
      color: #ffeef5;
    }

    .card-title-zh {
      font-size: 11px;
      color: #ffd6e2;
      margin: 0 0 6px;
    }

    .card-pref {
      font-size: 11px;
      color: #ffd1da;
      margin-bottom: 4px;
    }

    .card-snippet {
      font-size: 11px;
      color: #ffe2ee;
      opacity: 0.9;
      line-height: 1.5;
    }

    /* ===== Modal è©³ç´° ===== */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.75);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 16px;
      box-sizing: border-box;
    }

    .modal-content {
      background: radial-gradient(circle at 0 0,
                  rgba(255,255,255,0.1),
                  #15000a 55%,
                  #040003 100%);
      width: 90%;
      max-width: 900px;
      border-radius: 18px;
      display: grid;
      grid-template-columns: 1.1fr 1.4fr;
      gap: 0;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.95);
      border: 1px solid rgba(255,160,190,0.8);
      max-height: 92vh;
    }

    .modal-image-wrap {
      position: relative;
      background: #000;
    }

    .modal-image-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .modal-region-tag {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.8);
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 11px;
      color: #ffdce4;
      border: 1px solid rgba(255,160,190,0.8);
    }

    .modal-body {
      padding: 14px 16px 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      overflow-y: auto;
    }

    .modal-title {
      font-size: 18px;
      margin: 0;
      color: #ffeef7;
    }

    .modal-title-zh {
      margin: 0;
      font-size: 13px;
      color: #ffd5e5;
    }

    .modal-pref {
      font-size: 12px;
      color: #ffccdd;
      margin-top: 4px;
      margin-bottom: 6px;
    }

    .label {
      font-size: 11px;
      color: #ffbcd4;
      margin-top: 6px;
      margin-bottom: 2px;
      letter-spacing: .15em;
    }

    .text-block {
      font-size: 13px;
      line-height: 1.7;
      background: radial-gradient(circle at 0 0,
                  rgba(255,255,255,0.05),
                  rgba(0,0,0,0.9));
      border-radius: 10px;
      padding: 8px 10px;
      border: 1px solid rgba(255,150,190,0.35);
    }

    .text-block.zh {
      font-size: 13px;
      color: #ffecf3;
    }

    .modal-footer {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.8);
      white-space: nowrap;
    }

    .btn-close {
      background: linear-gradient(135deg, #ffb3c8, #ff829f);
      color: #3b0010;
    }

    .btn-link {
      background: linear-gradient(135deg, #2a1c4f, #412b80);
      color: #f5eefe;
      text-decoration: none;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 5px 14px rgba(0,0,0,0.9);
    }

    /* æ‰‹æ©Ÿç‰ˆ Modal å–®æ¬„ */
    @media (max-width: 768px) {
      .modal-content {
        grid-template-columns: 1fr;
        width: 96%;
        max-width: 560px;
      }
      .modal-body {
        padding: 12px;
      }
    }

    /* å³ä¸‹è§’å›é¦–é  */
    .home-fab {
      position: fixed;
      right: 18px;
      bottom: 18px;
      background: radial-gradient(circle at 30% 30%, #ffe6ea, #ff7ca1);
      color: #600030;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 26px;
      cursor: pointer;
      box-shadow: 0 6px 14px rgba(0,0,0,0.7);
      z-index: 50;
      text-decoration: none;
      transition: 0.2s;
    }

    .home-fab:hover {
      transform: translateY(-2px) scale(1.03);
      box-shadow: 0 8px 18px rgba(0,0,0,0.85);
    }

    @media (max-width: 768px) {
      .home-fab {
        width: 50px;
        height: 50px;
        font-size: 22px;
        right: 14px;
        bottom: 14px;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="title-wrap">
    <p class="title-main">åŸå…¸ç´¹ä»‹</p>
    <span class="title-sub-ja">ãƒ¼ éƒ½å¸‚ä¼èª¬ã®ã‚‚ã¨ã«ãªã£ãŸç‰©èªé›† ãƒ¼</span>
    <span class="title-sub-zh">éƒ½å¸‚å‚³èªªåŸæ•…äº‹ä¸€è¦½</span>
  </div>
</header>

<div class="page-inner">
  <div class="panel">
    <!-- æœå°‹ & ç¯©é¸åˆ— -->
    <div class="controls">
      <div class="search-box">
        <span class="search-icon">ğŸ”</span>
        <input id="searchInput" type="text" placeholder="éƒ½é“åºœçœŒåãƒ»åœ°åãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ / é—œéµå­—æœå°‹">
      </div>

      <div class="region-filters">
        <button class="region-btn active" data-region="all">ã™ã¹ã¦</button>
        <button class="region-btn" data-region="åŒ—æµ·é“">åŒ—æµ·é“</button>
        <button class="region-btn" data-region="æ±åŒ—">æ±åŒ—</button>
        <button class="region-btn" data-region="é–¢æ±">é–¢æ±</button>
        <button class="region-btn" data-region="ä¸­éƒ¨">ä¸­éƒ¨</button>
        <button class="region-btn" data-region="è¿‘ç•¿">è¿‘ç•¿</button>
        <button class="region-btn" data-region="ä¸­å›½ãƒ»å››å›½">ä¸­å›½ãƒ»å››å›½</button>
        <button class="region-btn" data-region="ä¹å·ãƒ»æ²–ç¸„">ä¹å·ãƒ»æ²–ç¸„</button>
      </div>
    </div>

    <div class="stats" id="stats"></div>

    <!-- å¡ç‰‡åˆ—è¡¨ -->
    <div class="cards" id="cards"></div>
  </div>
</div>

<!-- è©³ç´° Modal -->
<div class="modal" id="storyModal">
  <div class="modal-content">
    <div class="modal-image-wrap">
      <img id="modalImg" src="" alt="story">
      <div class="modal-region-tag" id="modalRegion"></div>
    </div>
    <div class="modal-body">
      <div>
        <h2 class="modal-title" id="modalTitleJa"></h2>
        <p class="modal-title-zh" id="modalTitleZh"></p>
        <p class="modal-pref" id="modalPref"></p>

        <div class="label">ã€ æ—¥æœ¬èª ã€‘</div>
        <div class="text-block" id="modalTextJa"></div>

        <div class="label">ã€ ä¸­æ–‡ ã€‘</div>
        <div class="text-block zh" id="modalTextZh"></div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-close" onclick="closeModal()">âœ• é–‰ã˜ã‚‹ / é—œé–‰</button>
        <!-- å¦‚æœä¹‹å¾Œæ¯ç¯‡æœ‰ã€ŒåŸå…¸é€£çµã€å¯ä»¥ç”¨é€™å€‹æŒ‰éˆ•å¸¶é€£çµ -->
        <a href="#" class="btn btn-link" id="modalLink" target="_blank" style="display:none;">
          ğŸ”— åŸå…¸ç´¹ä»‹ãƒšãƒ¼ã‚¸
        </a>
      </div>
    </div>
  </div>
</div>

<!-- å›é¦–é  (æ•…äº‹ä¸€è¦½ or ä¸»é¦–é ) -->
<a href="index.html" class="home-fab">ğŸ </a>

<script>
  // ======== é€™è£¡æ”¾ã€ŒåŸæ•…äº‹è³‡æ–™ã€ ========
  // ä¹‹å¾Œä½ åªè¦ä¸€ç›´å¾€è£¡é¢åŠ å°±å¥½
  // region: åŒ—æµ·é“ / æ±åŒ— / é–¢æ± / ä¸­éƒ¨ / è¿‘ç•¿ / ä¸­å›½ãƒ»å››å›½ / ä¹å·ãƒ»æ²–ç¸„
  const stories = [
    {
      id: "hokkaido-abashiri",
      region: "åŒ—æµ·é“",
      prefecture: "åŒ—æµ·é“",
      titleJa: "ç¶²èµ°ç›£ç„",
      titleZh: "ç¶²èµ°ç›£ç„",
      thumb: "hokaido.png",
      image: "hokaido.png",
      textJa: "åŒ—æµ·é“ã®å³ã—ã„å¯’ã•ã®ä¸­ã«ä½‡ã‚€æ—§ãƒ»ç¶²èµ°åˆ‘å‹™æ‰€ã€‚ä»Šã¯è¦³å…‰åœ°ã¨ãªã£ã¦ã„ã‚‹ãŒã€ã‹ã¤ã¦éé…·ãªåŠ´åƒã«è‹¦ã—ã‚“ã å›šäººãŸã¡ã®æ€¨å¿µãŒæ®‹ã£ã¦ã„ã‚‹ã¨è¨€ã‚ã‚Œã‚‹ã€‚å¤œã®å±•ç¤ºå®¤ã§ã¯ã€æ™‚æŠ˜èª°ã‚‚è§¦ã‚Œã¦ã„ãªã„ã¯ãšã®å™¨å…·ãŒè»‹ã‚€éŸ³ã‚’ç«‹ã¦ã€è¦‹å›ã‚Šã®è­¦å‚™å“¡ã®èƒŒå¾Œã«ã€å›šäººæœã‚’ç€ãŸå½±ãŒç«‹ã£ã¦ã„ãŸã¨ã„ã†â€¦â€¦ã€‚",
      textZh: "åè½åœ¨åŒ—æµ·é“åš´å¯’ä¹‹ä¸­çš„èˆŠç¶²èµ°åˆ‘å‹™æ‰€ï¼Œç¾åœ¨é›–å·²æˆç‚ºè§€å…‰æ™¯é»ï¼Œå»è¢«èªç‚ºä»æ®˜ç•™è‘—ç•¶å¹´å›šçŠ¯çš„æ€¨å¿µã€‚æ“šèªªåœ¨å¤œè£¡çš„å±•ç¤ºå®¤ï¼Œæœ‰æ™‚æœƒå‚³å‡ºæ˜æ˜æ²’æœ‰äººç¢°å»è‡ªè¡Œä½œéŸ¿çš„å™¨å…·è²ï¼Œå·¡é‚çš„è­¦å‚™å“¡èƒŒå¾Œï¼Œé‚„æœ‰äººç›®æ“Šç©¿è‘—å›šæœçš„é»‘å½±æ‚„ç„¶ä½‡ç«‹â€¦â€¦",
      originUrl: "" // å¦‚æœæœ‰å¤–éƒ¨åŸå…¸ä»‹ç´¹é å°±å¡«ç¶²å€ï¼Œæ²’æœ‰å°±ç•™ç©º
    },
    {
      id: "tokyo-sendagaya",
      region: "é–¢æ±",
      prefecture: "æ±äº¬éƒ½",
      titleJa: "åƒé§„ãƒ¶è°·ãƒˆãƒ³ãƒãƒ«",
      titleZh: "åƒé§„è°·éš§é“",
      thumb: "tokyo.png",
      image: "tokyo.png",
      textJa: "æ±äº¬ãƒ»åƒé§„ãƒ¶è°·ãƒˆãƒ³ãƒãƒ«ã¯ã€å‘¨è¾ºã§å¤šãã®äº‹æ•…ãŒèµ·ããŸã“ã¨ã‹ã‚‰ã€é¦–éƒ½é«˜ã®å¿ƒéœŠã‚¹ãƒãƒƒãƒˆã€ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã€‚æ·±å¤œã€ãƒˆãƒ³ãƒãƒ«ã‚’é€šéã—ãŸé‹è»¢æ‰‹ãŒã€ãƒãƒƒã‚¯ãƒŸãƒ©ãƒ¼ã«é€†ã•ã¾ã®ç”·ã®å§¿ã‚’è¦‹ãŸã¨ã„ã†è¨¼è¨€ã‚„ã€é›»è©±è¶Šã—ã«äº‹æ•…å½“æ—¥ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ãŒæµã‚Œã¦ããŸã¨ã„ã†æ€ªè«‡ãŒèªã‚Šç¶™ãŒã‚Œã¦ã„ã‚‹ã€‚",
      textZh: "ä½æ–¼æ±äº¬çš„åƒé§„è°·éš§é“ï¼Œå› å‘¨é‚Šå¤šæ¬¡ç™¼ç”Ÿäº¤é€šäº‹æ•…ï¼Œè¢«ç¨±ç‚ºé¦–éƒ½é«˜é€Ÿä¸Šçš„éˆç•°åœ°å¸¶ã€‚å‚³èæ·±å¤œé–‹è»Šé€šééš§é“çš„é§•é§›ï¼Œæ›¾åœ¨å¾Œç…§é¡ä¸­çœ‹è¦‹å€’æ›åœ¨å¤©èŠ±æ¿ä¸Šçš„ç”·å­èº«å½±ï¼Œä¹Ÿæœ‰äººæ¥èµ·æ‰‹æ©Ÿï¼Œè½è¦‹å°é¢å‚³ä¾†çš„ç«Ÿæ˜¯ã€Œè‡ªå·±å‡ºäº‹ç•¶å¤©çš„æ–°èå ±å°ã€â€¦â€¦é€™äº›é›¢å¥‡æ•…äº‹è‡³ä»Šä»åœ¨äººå€‘å£ä¸­æµå‚³ã€‚",
      originUrl: ""
    },
    {
      id: "miyazaki-aoshima",
      region: "ä¹å·ãƒ»æ²–ç¸„",
      prefecture: "å®®å´çœŒ",
      titleJa: "é’å³¶ãƒ»ã‚°ãƒªãƒ¼ãƒ³ãƒ‘ãƒ¼ã‚¯ã®å™‚",
      titleZh: "é’å³¶ç¶ åœ’çš„å‚³è",
      thumb: "miyazaki.png",
      image: "miyazaki.png",
      textJa: "å—å›½ã®é›°å›²æ°—æ¼‚ã†å®®å´ãƒ»é’å³¶ã®ä¸€è§’ã«ã‚ã‚‹ã‚°ãƒªãƒ¼ãƒ³ãƒ‘ãƒ¼ã‚¯ã€‚æ˜¼é–“ã¯å®¶æ—é€£ã‚Œã§è³‘ã‚ã†ãŒã€é–‰åœ’å¾Œã®å¤œã«ã¯ã€å…¬åœ’å†…ã®éŠå…·ãŒã²ã¨ã‚Šã§ã«æºã‚Œã€èª°ã‚‚ä¹—ã£ã¦ã„ãªã„ãƒ–ãƒ©ãƒ³ã‚³ã‹ã‚‰ç¬‘ã„å£°ãŒèã“ãˆã‚‹ã¨è¨€ã‚ã‚Œã‚‹ã€‚æµ·ã‹ã‚‰å¹ãä¸Šã’ã‚‹æ¹¿ã£ãŸé¢¨ãŒã€ã„ã¤ã®é–“ã«ã‹å†·ãŸã„å›ãã«å¤‰ã‚ã‚‹æ™‚ã€ãã“ã«ã€è¦‹ãˆãªã„å­ã©ã‚‚ãŸã¡ã€ãŒé›†ã¾ã£ã¦ãã‚‹ã®ã ã¨ã„ã†â€¦â€¦ã€‚",
      textZh: "å……æ»¿å—åœ‹æ°£æ¯çš„å®®å´é’å³¶ä¸€éš…ï¼Œæœ‰åº§åç‚ºç¶ åœ’çš„å…¬åœ’ã€‚ç™½å¤©æ™‚è¦ªå­éŠå®¢çµ¡ç¹¹ä¸çµ•ï¼Œä½†æ“šèªªåœ¨é–‰åœ’å¾Œçš„å¤œè£¡ï¼Œåœ’å…§çš„éŠå…·æœƒè‡ªå·±æ–æ™ƒï¼Œç©ºç„¡ä¸€äººçš„é¦éŸ†ä¸Šï¼Œéš±ç´„å‚³ä¾†å­©ç«¥çš„ç¬‘è²ã€‚å¾æµ·é¢å¹ä¾†çš„æ¿•æ½¤æµ·é¢¨ï¼ŒæŸä¸€åˆ»é–‹å§‹è®Šå¾—é™°å†·ï¼Œæ“šèªªé‚£æ­£æ˜¯ã€Œçœ‹ä¸è¦‹çš„å­©å­å€‘ã€èšé›†è€Œä¾†çš„æ™‚åˆ»â€¦â€¦",
      originUrl: ""
    }
  ];

  const cardsContainer = document.getElementById("cards");
  const searchInput = document.getElementById("searchInput");
  const statsEl = document.getElementById("stats");
  const regionButtons = document.querySelectorAll(".region-btn");

  let currentRegion = "all";
  let currentKeyword = "";

  function renderCards() {
    const keyword = currentKeyword.trim().toLowerCase();

    const filtered = stories.filter(st => {
      // åœ°å€ç¯©é¸
      if (currentRegion !== "all" && st.region !== currentRegion) return false;

      // é—œéµå­—æœå°‹ï¼šç¸£åã€æ¨™é¡Œã€å…§æ–‡
      if (keyword) {
        const haystack = [
          st.prefecture,
          st.titleJa,
          st.titleZh,
          st.textJa,
          st.textZh
        ].join(" ").toLowerCase();

        if (!haystack.includes(keyword)) return false;
      }
      return true;
    });

    statsEl.textContent = `è©²å½“ï¼š${filtered.length} ä»¶ / å…¨ ${stories.length} ä»¶`;

    cardsContainer.innerHTML = "";
    if (filtered.length === 0) {
      cardsContainer.innerHTML = "<p style='font-size:13px; color:#ffdce7; text-align:center; padding:12px 0;'>è©²å½“ã™ã‚‹åŸå…¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚„åœ°åŸŸã‚’å¤‰ãˆã¦ã¿ã¦ãã ã•ã„ã€‚</p>";
      return;
    }

    filtered.forEach(st => {
      const card = document.createElement("div");
      card.className = "card";
      card.onclick = () => openModal(st);

      const img = document.createElement("img");
      img.className = "card-thumb";
      img.src = st.thumb || st.image;
      img.alt = st.titleJa;

      const body = document.createElement("div");
      body.className = "card-body";

      const region = document.createElement("div");
      region.className = "card-region";
      region.textContent = `${st.region}ãƒ»${st.prefecture}`;

      const title = document.createElement("p");
      title.className = "card-title";
      title.textContent = st.titleJa;

      const titleZh = document.createElement("p");
      titleZh.className = "card-title-zh";
      titleZh.textContent = `ï¼ˆ${st.titleZh}ï¼‰`;

      const pref = document.createElement("p");
      pref.className = "card-pref";
      pref.textContent = st.prefecture;

      const snippet = document.createElement("p");
      snippet.className = "card-snippet";
      const shortText = (st.textJa || "").slice(0, 60);
      snippet.textContent = shortText + (st.textJa.length > 60 ? "â€¦" : "");

      body.appendChild(region);
      body.appendChild(title);
      body.appendChild(titleZh);
      body.appendChild(snippet);

      card.appendChild(img);
      card.appendChild(body);
      cardsContainer.appendChild(card);
    });
  }

  // æœå°‹è¼¸å…¥
  searchInput.addEventListener("input", (e) => {
    currentKeyword = e.target.value;
    renderCards();
  });

  // åœ°å€æŒ‰éˆ•é»æ“Š
  regionButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      regionButtons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      currentRegion = btn.dataset.region;
      renderCards();
    });
  });

  // Modal æ§åˆ¶
  const modal = document.getElementById("storyModal");
  const modalImg = document.getElementById("modalImg");
  const modalRegion = document.getElementById("modalRegion");
  const modalTitleJa = document.getElementById("modalTitleJa");
  const modalTitleZh = document.getElementById("modalTitleZh");
  const modalPref = document.getElementById("modalPref");
  const modalTextJa = document.getElementById("modalTextJa");
  const modalTextZh = document.getElementById("modalTextZh");
  const modalLink = document.getElementById("modalLink");

  function openModal(story) {
    modalImg.src = story.image || story.thumb;
    modalRegion.textContent = `${story.region}ãƒ»${story.prefecture}`;
    modalTitleJa.textContent = story.titleJa;
    modalTitleZh.textContent = `ï¼ˆ${story.titleZh}ï¼‰`;
    modalPref.textContent = story.prefecture;
    modalTextJa.textContent = story.textJa;
    modalTextZh.textContent = story.textZh;

    if (story.originUrl) {
      modalLink.href = story.originUrl;
      modalLink.style.display = "inline-flex";
    } else {
      modalLink.style.display = "none";
    }

    modal.style.display = "flex";
    document.body.style.overflow = "hidden";
  }

  function closeModal() {
    modal.style.display = "none";
    document.body.style.overflow = "";
  }

  window.closeModal = closeModal;

  // é»é»‘å¹•é—œé–‰
  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      closeModal();
    }
  });

  // ESC é—œé–‰
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && modal.style.display === "flex") {
      closeModal();
    }
  });

  // åˆå§‹æ¸²æŸ“
  renderCards();
</script>

</body>
</html>
